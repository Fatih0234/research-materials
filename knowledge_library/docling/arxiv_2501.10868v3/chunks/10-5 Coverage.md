## 5 Coverage

Each constrained decoding framework has limitations when it comes to translating JSON schemas into a set of constraints that can reliably guarantee the validity of LM outputs. To systematically evaluate the effectiveness of these frameworks, we define three notions of coverage:

4 See Tables13 and 14 for the number of tokens fast-forwarded in the experiments.

Table 3: As XGrammar doesn't support llama.cpp , we add an additional experiment with the Hugging Face Transformers inference engine for XGrammar and Guidance. All values are median of the result samples.

| Dataset       | Framework         | GCT (s)   | TTFT (s)   | TPOT (ms)   |
|---------------|-------------------|-----------|------------|-------------|
| GlaiveAI      | Guidance          | 0.01      | 0.36       | 36.92       |
| GitHub Easy   | XGrammar Guidance | 0.12 0.01 | 0.30 0.37  | 66.78 42.03 |
| GitHub Medium | Guidance XGrammar | 0.01 0.20 | 0.55 0.48  | 44.21 65.51 |
| GitHub Hard   | Guidance          | 0.01      | 0.73       |             |
|               |                   |           |            | 35.88       |
|               | XGrammar          | 0.30      | 0.65       | 65.20       |

Definition 5.1 (Declared Coverage) A schema is considered declared covered if the framework processes the schema without explicitly rejecting it or encountering runtime errors such as exceptions or crashes.

Definition 5.2 (Empirical Coverage) A schema is considered empirically covered if our experiments show that the constraints generated by the framework result in LM outputs that are schema-compliant.

Definition 5.3 (True Coverage) A schema is considered truly covered if the framework produces constraints that are precisely equivalent to the original JSON Schema definition, i.e., permitting all schema-compliant generations while rejecting all schemanoncompliant generations.

The most ideal coverage metric is the true coverage , denoted as C True. However, due to the infinite number of JSON instances that could be validated against a schema, it is difficult to measure in practice without a formal verification method that is capable of exhaustively comparing the schema's semantics against the framework's implementation. C Empirical is an approximation of C True as it only checks whether the finitely many outputs seen during our experiments conform to a given schema 5 .

While C Declared is not an estimate of C True per se, it is an upper-bound of both C Empirical and C True and is useful in deriving an additional metric from the coverage evaluation: Compliance Rate = C Empirical / C Declared. The Compliance Rate estimates the reliability of the constrained decoding framework in guaranteeing compliance given it accepts a given schema.
