## 6 Quality

In principle, constrained decoding should not affect the quality of the generated output as it only filters out the invalid tokens. However, things become more complicated due to ambiguity of tokenization [Vivien, 2024; GuidanceAI, 2024a; Geng et al., 2024] and the distributional shifts caused by the intervention [Geng et al., 2023; Tam et al., 2024]. As a hypothetical toy example, an LM might answer '89,000' instead of the correct '89000' in a GSM8K question. Constrained decoding can block the invalid token ',', enforcing structural compliance but potentially may cause the LM to go out of distribution and generate '890000' instead. Kurt [2024b] argued that the performance decline observed in previous studies [Tam et al., 2024] comes from inadequate prompting, insufficient contextual information, and poorly crafted schemas.
