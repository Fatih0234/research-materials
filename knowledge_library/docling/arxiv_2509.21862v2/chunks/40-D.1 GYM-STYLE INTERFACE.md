## D.1 GYM-STYLE INTERFACE

Listing 1 is a example showing how agents can be organized alongside an environment that follows a Gym-style interface in Shachi. Each agent receives observations from the environment and produces responses (actions), while the environment tracks episodes, rewards, and termination conditions.

```
1 N_EPISODES = 10 2 3 async def main() -> None: 4 agents = [ 5 AgentExample1(model="openai/gpt-4o", temperature=0), 6 AgentExample2(model="openai/gpt-3.5-turbo", temperature=0), 7 AgentExample3(model="openai/gpt-4", temperature=0), 8 ] 9 env = EnvironmentExample() 10 11 total_rewards = {agent_id: 0.0 for agent_id in range(len(agents))} 12 for _ in range(N_EPISODES): 13 observations = await env.reset() 14 while not env.done(): 15 futures = { 16 agent_id: agents[agent_id].step(observation) 17 for agent_id, observation in observations.items() 18 } 19 responses = dict(zip(futures.keys(), await asyncio.gather(* futures.values()))) 20 observations = await env.step(responses) 21 for agent_id, observation in observations.items(): 22 if observation.reward is not None: 23 total_rewards[agent_id] += observation.reward 24 25 if __name__ == "__main__": 26 asyncio.run(main())
```

Listing 1: Example code for the gym-like agent loop used in our framework.
